{"version":3,"sources":["webpack:///./node_modules/@angular/core/fesm5 lazy namespace object","webpack:///./src/app/home/index.ts","webpack:///./src/app/login/index.ts","webpack:///./src/app/register/index.ts","webpack:///./src/main.ts","webpack:///./src/polyfills.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/_services/alert.service.ts","webpack:///./src/app/_services/authentication.service.ts","webpack:///./src/app/_services/user.service.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.routing.ts","webpack:///./src/app/home/home.component.ts","webpack:///./src/app/home/home.component.html","webpack:///./src/app/login/login.component.ts","webpack:///./src/app/login/login.component.html","webpack:///./src/app/register/register.component.ts","webpack:///./src/app/register/register.component.html","webpack:///./src/app/_guards/index.ts","webpack:///./src/app/_guards/auth.guard.ts","webpack:///./src/app/_components/index.ts","webpack:///./src/app/_components/alert.component.ts","webpack:///./src/app/_components/alert.component.html","webpack:///./src/app/_helpers/index.ts","webpack:///./src/app/_helpers/error.interceptor.ts","webpack:///./src/app/_helpers/jwt.interceptor.ts","webpack:///./src/app/_helpers/fake-backend.ts","webpack:///./src/app/_services/index.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","__export","__webpack_require__","platform_browser_dynamic_1","app_module_1","platformBrowserDynamic","bootstrapModule","AppModule","core_1","platform_browser_1","forms_1","http_1","ngx_captcha_1","app_component_1","app_routing_1","_components_1","_helpers_1","home_1","login_1","register_1","__decorate","NgModule","imports","BrowserModule","ReactiveFormsModule","NgxCaptchaModule","HttpClientModule","routing","declarations","AppComponent","AlertComponent","HomeComponent","LoginComponent","RegisterComponent","providers","provide","HTTP_INTERCEPTORS","useClass","JwtInterceptor","multi","ErrorInterceptor","bootstrap","router_1","_services_1","router","authenticationService","_this","this","currentUser","subscribe","x","prototype","logout","navigate","Component","selector","template","Router","AuthenticationService","rxjs_1","AlertService","subject","Subject","keepAfterNavigationChange","events","event","NavigationStart","next","success","message","type","text","error","getMessage","asObservable","Injectable","providedIn","operators_1","http","currentUserSubject","BehaviorSubject","JSON","parse","localStorage","getItem","Object","defineProperty","value","login","username","password","totp","post","pipe","map","user","token","setItem","stringify","removeItem","HttpClient","UserService","getAll","get","getById","register","update","put","delete","_guards_1","appRoutes","path","component","canActivate","AuthGuard","redirectTo","RouterModule","forRoot","userService","users","currentUserSubscription","ngOnInit","loadAllUsers","ngOnDestroy","unsubscribe","deleteUser","first","formBuilder","route","alertService","loading","submitted","currentUserValue","loginForm","group","Validators","required","returnUrl","snapshot","queryParams","controls","onSubmit","invalid","f","data","FormBuilder","ActivatedRoute","totpkeyUrl","captchaExpired","captchaSuccess","siteKey","registerForm","minLength","totpkey","recaptcha","handleReset","handleSuccess","captchaResponse","handleLoad","handleExpire","gerarKey","obj","crypto","subtle","generateKey","name","hash","key","console","log","obj2","window","exportKey","keydata","keydata2","Int8Array","secret","toBase32","patchValue","gerarQR","byte","i","alphabet","shift","carry","buf","length","state","url","subscription","intercept","request","handle","catchError","err","status","location","reload","statusText","throwError","clone","setHeaders","Authorization","FakeBackendInterceptor","of","mergeMap","endsWith","method","filteredUsers","filter","body","firstName","lastName","HttpResponse","headers","match","urlParts","split","id_1","parseInt","matchedUsers","newUser_1","push","splice","materialize","delay","dematerialize","fakeBackendProvider"],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 149;","export * from './home.component';","export * from './login.component';","export * from './register.component';","import './polyfills';\n\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app.module';\nplatformBrowserDynamic().bootstrapModule(AppModule);","import 'core-js/es6/reflect';\nimport 'core-js/es7/reflect';\nimport 'zone.js/dist/zone';","import { NgModule }      from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { ReactiveFormsModule }    from '@angular/forms';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { NgxCaptchaModule } from 'ngx-captcha';\n\n// used to create fake backend\nimport { fakeBackendProvider } from './_helpers';\n\nimport { AppComponent }  from './app.component';\nimport { routing }        from './app.routing';\n\nimport { AlertComponent } from './_components';\nimport { JwtInterceptor, ErrorInterceptor } from './_helpers';\nimport { HomeComponent } from './home';\nimport { LoginComponent } from './login';\nimport { RegisterComponent } from './register';\n\n@NgModule({\n    imports: [\n        BrowserModule,\n        ReactiveFormsModule,\n\t\tNgxCaptchaModule,\n        HttpClientModule,\n        routing\n    ],\n    declarations: [\n        AppComponent,\n        AlertComponent,\n        HomeComponent,\n        LoginComponent,\n        RegisterComponent\n    ],\n    providers: [\n        { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\n        { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\n\n        // provider used to create fake backend\n        //fakeBackendProvider\n    ],\n    bootstrap: [AppComponent]\n})\n\nexport class AppModule { }","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AuthenticationService } from './_services';\nimport { User } from './_models';\n\n@Component({ selector: 'app', template: require('./app.component.html') })\nexport class AppComponent {\n    currentUser: User;\n\n    constructor(\n        private router: Router,\n        private authenticationService: AuthenticationService\n    ) {\n        this.authenticationService.currentUser.subscribe(x => this.currentUser = x);\n    }\n\n    logout() {\n        this.authenticationService.logout();\n        this.router.navigate(['/login']);\n    }\n}","import { Injectable } from '@angular/core';\nimport { Router, NavigationStart } from '@angular/router';\nimport { Observable, Subject } from 'rxjs';\n\n@Injectable({ providedIn: 'root' })\nexport class AlertService {\n    private subject = new Subject<any>();\n    private keepAfterNavigationChange = false;\n\n    constructor(private router: Router) {\n        // clear alert message on route change\n        router.events.subscribe(event => {\n            if (event instanceof NavigationStart) {\n                if (this.keepAfterNavigationChange) {\n                    // only keep for a single location change\n                    this.keepAfterNavigationChange = false;\n                } else {\n                    // clear alert\n                    this.subject.next();\n                }\n            }\n        });\n    }\n\n    success(message: string, keepAfterNavigationChange = false) {\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\n        this.subject.next({ type: 'success', text: message });\n    }\n\n    error(message: string, keepAfterNavigationChange = false) {\n        this.keepAfterNavigationChange = keepAfterNavigationChange;\n        this.subject.next({ type: 'error', text: message });\n    }\n\n    getMessage(): Observable<any> {\n        return this.subject.asObservable();\n    }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { User } from '@/_models';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthenticationService {\n    private currentUserSubject: BehaviorSubject<User>;\n    public currentUser: Observable<User>;\n\n    constructor(private http: HttpClient) {\n        this.currentUserSubject = new BehaviorSubject<User>(JSON.parse(localStorage.getItem('currentUser')));\n        this.currentUser = this.currentUserSubject.asObservable();\n    }\n\n    public get currentUserValue(): User {\n        return this.currentUserSubject.value;\n    }\n\n    login(username: string, password: string, totp: string) {\n        return this.http.post<any>(`${config.apiUrl}/users/authenticate`, { username, password, totp })\n            .pipe(map(user => {\n                // login successful if there's a jwt token in the response\n                if (user && user.token) {\n                    // store user details and jwt token in local storage to keep user logged in between page refreshes\n                    localStorage.setItem('currentUser', JSON.stringify(user));\n                    this.currentUserSubject.next(user);\n                }\n\n                return user;\n            }));\n    }\n\n    logout() {\n        // remove user from local storage to log user out\n        localStorage.removeItem('currentUser');\n        this.currentUserSubject.next(null);\n    }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { User } from '@/_models';\n\n@Injectable({ providedIn: 'root' })\nexport class UserService {\n    constructor(private http: HttpClient) { }\n\n    getAll() {\n        return this.http.get<User[]>(`${config.apiUrl}/users`);\n    }\n\n    getById(id: number) {\n        return this.http.get(`${config.apiUrl}/users/${id}`);\n    }\n\n    register(user: User) {\n        return this.http.post(`${config.apiUrl}/users/register`, user);\n    }\n\n    update(user: User) {\n        return this.http.put(`${config.apiUrl}/users/${user.id}`, user);\n    }\n\n    delete(id: number) {\n        return this.http.delete(`${config.apiUrl}/users/${id}`);\n    }\n}","module.exports = \"<!-- nav -->\\n<nav class=\\\"navbar navbar-expand navbar-dark bg-dark\\\" *ngIf=\\\"currentUser\\\">\\n    <div class=\\\"navbar-nav\\\">\\n        <a class=\\\"nav-item nav-link\\\" routerLink=\\\"/\\\">Home</a>\\n        <a class=\\\"nav-item nav-link\\\" (click)=\\\"logout()\\\">Logout</a>\\n    </div>\\n</nav>\\n\\n<!-- main app container -->\\n<div class=\\\"jumbotron\\\">\\n    <div class=\\\"container\\\">\\n        <div class=\\\"row\\\">\\n            <div class=\\\"col-sm-6 offset-sm-3\\\">\\n                <alert></alert>\\n                <router-outlet></router-outlet>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<!-- credits -->\\n<div class=\\\"text-center\\\">\\n    <p>\\n        <a href=\\\"https://github.com/clovis-sensedia\\\" target=\\\"_top\\\">Sensedia Cliente TOTP em Angular 7</a>\\n    </p> \\n</div>\"","import { Routes, RouterModule } from '@angular/router';\n\nimport { HomeComponent } from './home';\nimport { LoginComponent } from './login';\nimport { RegisterComponent } from './register';\nimport { AuthGuard } from './_guards';\n\nconst appRoutes: Routes = [\n    { path: '', component: HomeComponent, canActivate: [AuthGuard] },\n    { path: 'login', component: LoginComponent },\n    { path: 'register', component: RegisterComponent },\n\n    // otherwise redirect to home\n    { path: '**', redirectTo: '' }\n];\n\nexport const routing = RouterModule.forRoot(appRoutes);","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { first } from 'rxjs/operators';\n\nimport { User } from '@/_models';\nimport { UserService, AuthenticationService } from '@/_services';\n\n@Component({ template: require('./home.component.html') })\nexport class HomeComponent implements OnInit, OnDestroy {\n    currentUser: User;\n    currentUserSubscription: Subscription;\n    users: User[] = [];\n\n    constructor(\n        private authenticationService: AuthenticationService,\n        private userService: UserService\n    ) {\n        this.currentUserSubscription = this.authenticationService.currentUser.subscribe(user => {\n            this.currentUser = user;\n        });\n    }\n\n    ngOnInit() {\n        this.loadAllUsers();\n    }\n\n    ngOnDestroy() {\n        // unsubscribe to ensure no memory leaks\n        this.currentUserSubscription.unsubscribe();\n    }\n\n    deleteUser(id: number) {\n        this.userService.delete(id).pipe(first()).subscribe(() => {\n            this.loadAllUsers()\n        });\n    }\n\n    private loadAllUsers() {\n        this.userService.getAll().pipe(first()).subscribe(users => {\n            this.users = users;\n        });\n    }\n}","module.exports = \"<h1>Hi {{currentUser.firstName}}!</h1>\\n<p>You're logged in with Angular 7!!</p>\\n<h3>All registered users:</h3>\\n<ul>\\n    <li *ngFor=\\\"let user of users\\\">\\n        {{user.username}}\\n        - <a (click)=\\\"deleteUser(user.id)\\\" class=\\\"text-danger\\\">Delete</a>\\n    </li>\\n</ul>\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\n\nimport { AlertService, AuthenticationService } from '@/_services';\n\n@Component({template: require('./login.component.html')})\nexport class LoginComponent implements OnInit {\n    loginForm: FormGroup;\n    loading = false;\n    submitted = false;\n    returnUrl: string;\n\n    constructor(\n        private formBuilder: FormBuilder,\n        private route: ActivatedRoute,\n        private router: Router,\n        private authenticationService: AuthenticationService,\n        private alertService: AlertService\n    ) {\n        // redirect to home if already logged in\n        if (this.authenticationService.currentUserValue) { \n            this.router.navigate(['/']);\n        }\n    }\n\n    ngOnInit() {\n        this.loginForm = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required],\n\t\t\ttotp: ['', Validators.required]\n        });\n\n        // get return url from route parameters or default to '/'\n        this.returnUrl = this.route.snapshot.queryParams['returnUrl'] || '/';\n    }\n\n    // convenience getter for easy access to form fields\n    get f() { return this.loginForm.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // stop here if form is invalid\n        if (this.loginForm.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.authenticationService.login(this.f.username.value, this.f.password.value, this.f.totp.value)\n            .pipe(first())\n            .subscribe(\n                data => {\n                    this.router.navigate([this.returnUrl]);\n                },\n                error => {\n                    this.alertService.error(error);\n                    this.loading = false;\n                });\n    }\n}\n","module.exports = \"<h2>Login</h2>\\n<form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"username\\\">Username</label>\\n        <input type=\\\"text\\\" formControlName=\\\"username\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.username.errors }\\\" />\\n        <div *ngIf=\\\"submitted && f.username.errors\\\" class=\\\"invalid-feedback\\\">\\n            <div *ngIf=\\\"f.username.errors.required\\\">Username is required</div>\\n        </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"password\\\">Password</label>\\n        <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.password.errors }\\\" />\\n        <div *ngIf=\\\"submitted && f.password.errors\\\" class=\\\"invalid-feedback\\\">\\n            <div *ngIf=\\\"f.password.errors.required\\\">Password is required</div>\\n        </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"totp\\\">Senha Google Authenticator</label>\\n        <input type=\\\"text\\\" formControlName=\\\"totp\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.totp.errors }\\\" />\\n        <div *ngIf=\\\"submitted && f.totp.errors\\\" class=\\\"invalid-feedback\\\">\\n            <div *ngIf=\\\"f.totp.errors.required\\\">Senha Google Authenticator é obrigatória</div>\\n        </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"loading\\\" class=\\\"btn btn-primary\\\">Login</button>\\n        <img *ngIf=\\\"loading\\\" class=\\\"pl-3\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\n        <a routerLink=\\\"/register\\\" class=\\\"btn btn-link\\\">Register</a>\\n    </div>\\n</form>\"","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { first } from 'rxjs/operators';\nimport { ReCaptcha2Component } from 'ngx-captcha';\n\nimport { AlertService, UserService, AuthenticationService } from '@/_services';\n\n@Component({template: require('./register.component.html')})\nexport class RegisterComponent implements OnInit {\n    registerForm: FormGroup;\n    loading = false;\n    submitted = false;\n\ttotpkeyUrl = '';\n\tcaptchaExpired = false;\n\tcaptchaSuccess = false;\n\tpublic readonly siteKey = '6LeTUpAUAAAAAHWMlqAIV6PJcU3Qt9cIINsApalP';\n    constructor(\n        private formBuilder: FormBuilder,\n        private router: Router,\n        private authenticationService: AuthenticationService,\n        private userService: UserService,\n        private alertService: AlertService\n    ) { \n        // redirect to home if already logged in\n        if (this.authenticationService.currentUserValue) { \n            this.router.navigate(['/']);\n        }\n    }\n\n    ngOnInit() {\n        this.registerForm = this.formBuilder.group({\n            username: ['', Validators.required],\n            password: ['', [Validators.required, Validators.minLength(6)]],\n            totpkey: ['', Validators.required],\n\t\t\trecaptcha: ['', Validators.required]\n        });\n    }\n\thandleReset(): void {\n\t\tthis.captchaExpired = false;\n\t\tthis.captchaSuccess = false;\n\t}\n\thandleSuccess(captchaResponse: string): void {\n\t\tthis.captchaSuccess = true;\n\t}\n\thandleLoad(): void {\n\t}\n\thandleExpire(): void {\n\t\tthis.captchaExpired = true;\n\t}\n\tgerarKey() {\n\t  var obj = this;\n      crypto.subtle.generateKey(\n        {\n          name: \"HMAC\",\n          hash: {name: \"SHA-1\"},\n        },\n        true, //whether the key is extractable (i.e. can be used in exportKey)\n        [\"sign\", \"verify\"]\n      )\n      .then(function(key){ //generateKey\n        console.log(key);\n\t\tvar obj2 = obj;\n        window.crypto.subtle.exportKey(\n          \"raw\",\n          key\n        )\n        .then(function(keydata){//exportKey\n          //returns the exported key data\n          var keydata2 = new Int8Array(keydata);\n          console.log(keydata2);\n          //Cria uma versão digitável da chave\n          var secret = obj2.toBase32(keydata2); // 'JBSWY3DPEHPK3PXP';\n          obj2.registerForm.patchValue({\n            totpkey: secret\n          });\n        });\n      });\n\t}\n\tgerarQR() {\n\t\tthis.totpkeyUrl = 'https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=200x200&chld=M|0&cht=qr&chl=otpauth://totp/SensediaTest%3Fsecret%3D' + this.registerForm.value.totpkey;\n\t}\n    // convenience getter for easy access to form fields\n    get f() { return this.registerForm.controls; }\n\n    onSubmit() {\n        this.submitted = true;\n\n        // stop here if form is invalid\n        if (this.registerForm.invalid) {\n            return;\n        }\n\n        this.loading = true;\n        this.userService.register(this.registerForm.value)\n            .pipe(first())\n            .subscribe(\n                data => {\n                    this.alertService.success('Registration successful', true);\n                    this.router.navigate(['/login']);\n                },\n                error => {\n                    this.alertService.error(error);\n                    this.loading = false;\n                });\n    }\n\t\n    toBase32(text : Int8Array) {\n      var alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\n      var shift = 3;\n      var carry = 0;\n      var symbol;\n      var byte;\n      var i;\n      var buf = '';\n      for (i = 0; i < text.length; i++) {\n        byte = text[i];\n        symbol = carry | (byte >> shift);\n        buf += alphabet[symbol & 0x1f];\n        if (shift > 5) {\n          shift -= 5;\n          symbol = byte >> shift; \n          buf += alphabet[symbol & 0x1f];\n        }\n        shift = 5 - shift;\n        carry = byte << shift;\n        shift = 8 - shift;\n      }\n      if (shift !== 3) {\n        buf += alphabet[carry & 0x1f];\n      }\n      return buf;\n    }\n}\n","module.exports = \"<h2>Register</h2>\\n<form [formGroup]=\\\"registerForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"username\\\">Username</label>\\n        <input type=\\\"text\\\" formControlName=\\\"username\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.username.errors }\\\" />\\n        <div *ngIf=\\\"submitted && f.username.errors\\\" class=\\\"invalid-feedback\\\">\\n            <div *ngIf=\\\"f.username.errors.required\\\">Username is required</div>\\n        </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"password\\\">Password</label>\\n        <input type=\\\"password\\\" formControlName=\\\"password\\\" class=\\\"form-control\\\" [ngClass]=\\\"{ 'is-invalid': submitted && f.password.errors }\\\" />\\n        <div *ngIf=\\\"submitted && f.password.errors\\\" class=\\\"invalid-feedback\\\">\\n            <div *ngIf=\\\"f.password.errors.required\\\">Password is required</div>\\n            <div *ngIf=\\\"f.password.errors.minlength\\\">Password must be at least 6 characters</div>\\n        </div>\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"!registerForm.value.username || registerForm.value.username.length < 6\\\" type=\\\"button\\\" (click)=\\\"gerarKey()\\\" class=\\\"btn btn-primary\\\">Gerar chave Google Authenticator</button>\\n\\t</div>\\n    <div class=\\\"form-group\\\">\\n        <label for=\\\"totpkey\\\">Chave para Google Authenticator</label>\\n        <input type=\\\"text\\\" formControlName=\\\"totpkey\\\" class=\\\"form-control\\\" readonly />\\n    </div>\\n    <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"!registerForm.value.totpkey || registerForm.value.totpkey.length < 8\\\" type=\\\"button\\\" (click)=\\\"gerarQR()\\\" class=\\\"btn btn-primary\\\">Obter QRCode</button>\\n        <img *ngIf=\\\"totpkeyUrl.length > 1\\\" [src]=\\\"totpkeyUrl\\\" />\\n\\t</div>\\n\\t\\n    <div class=\\\"form-group\\\">\\n  <ngx-recaptcha2 #captchaElem\\n    [siteKey]=\\\"siteKey\\\"\\n    (reset)=\\\"handleReset()\\\"\\n    (expire)=\\\"handleExpire()\\\"\\n    (load)=\\\"handleLoad()\\\"\\n    (success)=\\\"handleSuccess($event)\\\"\\n    [useGlobalDomain]=\\\"false\\\"\\n    [size]=\\\"size\\\"\\n    [hl]=\\\"lang\\\"\\n    [theme]=\\\"theme\\\"\\n    [type]=\\\"type\\\"\\n    formControlName=\\\"recaptcha\\\">\\n  </ngx-recaptcha2>\\n\\t</div>\\n\\t\\n\\t\\n    <div class=\\\"form-group\\\">\\n        <button [disabled]=\\\"loading || captchaExpired || !captchaSuccess\\\" class=\\\"btn btn-primary\\\">Register</button>\\n        <img *ngIf=\\\"loading\\\" class=\\\"pl-3\\\" src=\\\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\\\" />\\n        <a routerLink=\\\"/login\\\" class=\\\"btn btn-link\\\">Cancel</a>\\n    </div>\\n</form>\\n\"","export * from './auth.guard';","import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { AuthenticationService } from '@/_services';\n\n@Injectable({ providedIn: 'root' })\nexport class AuthGuard implements CanActivate {\n    constructor(\n        private router: Router,\n        private authenticationService: AuthenticationService\n    ) {}\n\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        const currentUser = this.authenticationService.currentUserValue;\n        if (currentUser) {\n            // authorised so return true\n            return true;\n        }\n\n        // not logged in so redirect to login page with the return url\n        this.router.navigate(['/login'], { queryParams: { returnUrl: state.url }});\n        return false;\n    }\n}","export * from './alert.component';","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { AlertService } from '@/_services';\n\n@Component({\n    selector: 'alert',\n    template: require('./alert.component.html')\n})\n\nexport class AlertComponent implements OnInit, OnDestroy {\n    private subscription: Subscription;\n    message: any;\n\n    constructor(private alertService: AlertService) { }\n\n    ngOnInit() {\n        this.subscription = this.alertService.getMessage().subscribe(message => { \n            this.message = message; \n        });\n    }\n\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n}","module.exports = \"<div *ngIf=\\\"message\\\" [ngClass]=\\\"{ 'alert': message, 'alert-success': message.type === 'success', 'alert-danger': message.type === 'error' }\\\">{{message.text}}</div>\"","export * from './error.interceptor';\nexport * from './jwt.interceptor';\nexport * from './fake-backend';","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\nimport { AuthenticationService } from '@/_services';\n\n@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\n    constructor(private authenticationService: AuthenticationService) {}\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        return next.handle(request).pipe(catchError(err => {\n            if (err.status === 401) {\n                // auto logout if 401 response returned from api\n                this.authenticationService.logout();\n                location.reload(true);\n            }\n            \n            const error = err.error.message || err.statusText;\n            return throwError(error);\n        }))\n    }\n}","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nimport { AuthenticationService } from '@/_services';\n\n@Injectable()\nexport class JwtInterceptor implements HttpInterceptor {\n    constructor(private authenticationService: AuthenticationService) {}\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        // add authorization header with jwt token if available\n        let currentUser = this.authenticationService.currentUserValue;\n        if (currentUser && currentUser.token) {\n            request = request.clone({\n                setHeaders: { \n                    Authorization: `Bearer ${currentUser.token}`\n                }\n            });\n        }\n\n        return next.handle(request);\n    }\n}","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpResponse, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { Observable, of, throwError } from 'rxjs';\nimport { delay, mergeMap, materialize, dematerialize } from 'rxjs/operators';\n\n@Injectable()\nexport class FakeBackendInterceptor implements HttpInterceptor {\n\n    constructor() { }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        // array in local storage for registered users\n        let users: any[] = JSON.parse(localStorage.getItem('users')) || [];\n\n        // wrap in delayed observable to simulate server api call\n        return of(null).pipe(mergeMap(() => {\n\n            // authenticate\n            if (request.url.endsWith('/users/authenticate') && request.method === 'POST') {\n                // find if any user matches login credentials\n                let filteredUsers = users.filter(user => {\n                    return user.username === request.body.username && user.password === request.body.password;\n                });\n\n                if (filteredUsers.length) {\n                    // if login details are valid return 200 OK with user details and fake jwt token\n                    let user = filteredUsers[0];\n                    let body = {\n                        id: user.id,\n                        username: user.username,\n                        firstName: user.firstName,\n                        lastName: user.lastName,\n                        token: 'fake-jwt-token'\n                    };\n\n                    return of(new HttpResponse({ status: 200, body: body }));\n                } else {\n                    // else return 400 bad request\n                    return throwError({ error: { message: 'Username or password is incorrect' } });\n                }\n            }\n\n            // get users\n            if (request.url.endsWith('/users') && request.method === 'GET') {\n                // check for fake auth token in header and return users if valid, this security is implemented server side in a real application\n                if (request.headers.get('Authorization') === 'Bearer fake-jwt-token') {\n                    return of(new HttpResponse({ status: 200, body: users }));\n                } else {\n                    // return 401 not authorised if token is null or invalid\n                    return throwError({ status: 401, error: { message: 'Unauthorised' } });\n                }\n            }\n\n            // get user by id\n            if (request.url.match(/\\/users\\/\\d+$/) && request.method === 'GET') {\n                // check for fake auth token in header and return user if valid, this security is implemented server side in a real application\n                if (request.headers.get('Authorization') === 'Bearer fake-jwt-token') {\n                    // find user by id in users array\n                    let urlParts = request.url.split('/');\n                    let id = parseInt(urlParts[urlParts.length - 1]);\n                    let matchedUsers = users.filter(user => { return user.id === id; });\n                    let user = matchedUsers.length ? matchedUsers[0] : null;\n\n                    return of(new HttpResponse({ status: 200, body: user }));\n                } else {\n                    // return 401 not authorised if token is null or invalid\n                    return throwError({ status: 401, error: { message: 'Unauthorised' } });\n                }\n            }\n\n            // register user\n            if (request.url.endsWith('/users/register') && request.method === 'POST') {\n                // get new user object from post body\n                let newUser = request.body;\n\n                // validation\n                let duplicateUser = users.filter(user => { return user.username === newUser.username; }).length;\n                if (duplicateUser) {\n                    return throwError({ error: { message: 'Username \"' + newUser.username + '\" is already taken' } });\n                }\n\n                // save new user\n                newUser.id = users.length + 1;\n                users.push(newUser);\n                localStorage.setItem('users', JSON.stringify(users));\n\n                // respond 200 OK\n                return of(new HttpResponse({ status: 200 }));\n            }\n\n            // delete user\n            if (request.url.match(/\\/users\\/\\d+$/) && request.method === 'DELETE') {\n                // check for fake auth token in header and return user if valid, this security is implemented server side in a real application\n                if (request.headers.get('Authorization') === 'Bearer fake-jwt-token') {\n                    // find user by id in users array\n                    let urlParts = request.url.split('/');\n                    let id = parseInt(urlParts[urlParts.length - 1]);\n                    for (let i = 0; i < users.length; i++) {\n                        let user = users[i];\n                        if (user.id === id) {\n                            // delete user\n                            users.splice(i, 1);\n                            localStorage.setItem('users', JSON.stringify(users));\n                            break;\n                        }\n                    }\n\n                    // respond 200 OK\n                    return of(new HttpResponse({ status: 200 }));\n                } else {\n                    // return 401 not authorised if token is null or invalid\n                    return throwError({ status: 401, error: { message: 'Unauthorised' } });\n                }\n            }\n\n            // pass through any requests not handled above\n            return next.handle(request);\n            \n        }))\n\n        // call materialize and dematerialize to ensure delay even if an error is thrown (https://github.com/Reactive-Extensions/RxJS/issues/648)\n        .pipe(materialize())\n        .pipe(delay(500))\n        .pipe(dematerialize());\n    }\n}\n\nexport let fakeBackendProvider = {\n    // use fake backend in place of Http service for backend-less development\n    provide: HTTP_INTERCEPTORS,\n    useClass: FakeBackendInterceptor,\n    multi: true\n};","export * from './alert.service';\nexport * from './authentication.service';\nexport * from './user.service';"],"sourceRoot":""}